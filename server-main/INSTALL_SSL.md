# üîí –£—Å—Ç–∞–Ω–æ–≤–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (HTTPS)

**–¶–µ–ª—å:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è –¥–æ–º–µ–Ω–∞ `centraldispatch.id` —á—Ç–æ–±—ã —Å–∞–π—Ç —Ä–∞–±–æ—Ç–∞–ª –ø–æ HTTPS.

---

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh centraldispatch

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Certbot (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
apt update
apt install -y certbot python3-certbot-nginx

# 3. –ü–æ–ª—É—á–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç Nginx)
certbot --nginx -d centraldispatch.id \
  --non-interactive \
  --agree-tos \
  --email admin@centraldispatch.id \
  --redirect

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ SSL —Ä–∞–±–æ—Ç–∞–µ—Ç
curl -I https://centraldispatch.id
```

**–ì–æ—Ç–æ–≤–æ!** –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS: `https://centraldispatch.id`

---

## üìã –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh centraldispatch
# –∏–ª–∏
ssh root@72.60.31.149
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Certbot

```bash
# –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤
apt update

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Certbot –∏ –ø–ª–∞–≥–∏–Ω –¥–ª—è Nginx
apt install -y certbot python3-certbot-nginx

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É
certbot --version
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ HTTP

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω
curl http://centraldispatch.id

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å HTML –∏–ª–∏ JSON –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** Certbot –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTP –∏ DNS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ!

### –®–∞–≥ 4: –ü–æ–ª—É—á–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```bash
certbot --nginx -d centraldispatch.id \
  --non-interactive \
  --agree-tos \
  --email admin@centraldispatch.id \
  --redirect
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:**
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Ç Let's Encrypt
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç HTTPS (–ø–æ—Ä—Ç 443)
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å HTTP –Ω–∞ HTTPS
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞**

```bash
certbot --nginx -d centraldispatch.id
```

–°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:
- –í–≤–µ–¥–∏ email (–¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞)
- –°–æ–≥–ª–∞—Å–∏—Å—å —Å —É—Å–ª–æ–≤–∏—è–º–∏ (Y)
- –í—ã–±–µ—Ä–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å HTTP –Ω–∞ HTTPS (2 - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
certbot certificates

# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å:
# Certificate Name: centraldispatch.id
# Domains: centraldispatch.id
# Expiry Date: (–¥–∞—Ç–∞ —á–µ—Ä–µ–∑ 90 –¥–Ω–µ–π)
# Certificate Path: /etc/letsencrypt/live/centraldispatch.id/fullchain.pem

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
nginx -t

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å HTTPS
curl -I https://centraldispatch.id

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
# HTTP/2 200
# (–∏–ª–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç, –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å HTTP –Ω–∞ HTTPS
curl -I http://centraldispatch.id

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
# HTTP/1.1 301 Moved Permanently
# Location: https://centraldispatch.id
```

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `https://centraldispatch.id`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ó–µ–ª–µ–Ω—ã–π –∑–∞–º–æ—á–µ–∫ –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
- ‚úÖ "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∑–∞—â–∏—â–µ–Ω–æ"
- ‚úÖ –°–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ HTTPS

---

## üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ cron.

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
```bash
# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ä–µ–∞–ª—å–Ω–æ)
certbot renew --dry-run

# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```

**–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–µ 60 –¥–Ω–µ–π** (—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 90 –¥–Ω–µ–π).

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 1: Certbot –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

**–û—à–∏–±–∫–∞:** "Failed to obtain certificate"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTP
curl http://centraldispatch.id

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS
dig centraldispatch.id
# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å IP —Å–µ—Ä–≤–µ—Ä–∞: 72.60.31.149

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ—Ä—Ç 80 –æ—Ç–∫—Ä—ã—Ç
netstat -tlnp | grep :80

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
nginx -t

# 5. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
certbot --nginx -d centraldispatch.id --non-interactive --agree-tos --email admin@centraldispatch.id
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –û—à–∏–±–∫–∞ "Too many requests"

**–û—à–∏–±–∫–∞:** "Too many requests" –æ—Ç Let's Encrypt

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ (5 –≤ –Ω–µ–¥–µ–ª—é –Ω–∞ –¥–æ–º–µ–Ω)

**–†–µ—à–µ–Ω–∏–µ:**
- –ü–æ–¥–æ–∂–¥–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –Ω–æ HTTPS –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
nginx -t

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Nginx –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω
systemctl status nginx

# 3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å Nginx
systemctl reload nginx

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
tail -50 /var/log/nginx/error.log

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ—Ä—Ç 443 –æ—Ç–∫—Ä—ã—Ç
netstat -tlnp | grep :443
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: Certbot –Ω–∞—Ö–æ–¥–∏—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

–ï—Å–ª–∏ Certbot —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç:
```
What would you like to do?
1: Attempt to reinstall this existing certificate
2: Renew & replace the certificate
```

**–í—ã–±–µ—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç 1** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
- –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- –ù–µ —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—ã–π (—ç–∫–æ–Ω–æ–º–∏—Ç –ª–∏–º–∏—Ç—ã)
- –ë—ã—Å—Ç—Ä–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç Nginx

**–í—ã–±–µ—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç 2** —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:
- –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É—Å—Ç–∞—Ä–µ–ª
- –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ–∫—É—â–∏–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º

---

## üìù –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
certbot certificates

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
cat /etc/nginx/sites-available/centraldispatch.id | grep -A 10 "listen 443"

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å HTTPS
curl -I https://centraldispatch.id

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç
curl -I http://centraldispatch.id

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
# –û—Ç–∫—Ä–æ–π: https://centraldispatch.id
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ SSL

- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω –∫ —Å–µ—Ä–≤–µ—Ä—É
- [ ] Certbot —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTP
- [ ] DNS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø–æ–ª—É—á–µ–Ω
- [ ] Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç (`curl -I https://centraldispatch.id`)
- [ ] HTTP —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ HTTPS
- [ ] –í –±—Ä–∞—É–∑–µ—Ä–µ –∑–µ–ª–µ–Ω—ã–π –∑–∞–º–æ—á–µ–∫
- [ ] –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ (`certbot renew --dry-run`)

---

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞ (–≤—Å–µ –≤ –æ–¥–Ω–æ–π)

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SSL –±—ã—Å—Ç—Ä–æ, –≤—ã–ø–æ–ª–Ω–∏:

```bash
ssh centraldispatch "apt update && apt install -y certbot python3-certbot-nginx && certbot --nginx -d centraldispatch.id --non-interactive --agree-tos --email admin@centraldispatch.id --redirect && certbot certificates"
```

---

**–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ SSL —Å–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS: `https://centraldispatch.id`** üîí‚ú®






